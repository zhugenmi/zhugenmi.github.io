---
title: 【C++ STL】deque
author: zhugenmi
date: 2024-10-11 
categories: [C/C++, STL]
tags: [c++,deque]
---

## 说明

需包含头文件`<deque>`

`std::deque` （ double-ended queue ，双端队列）是有下标顺序容器，它允许在其首尾两端快速插入及删除。另外，在 deque 任一端插入或删除不会非法化指向其余元素的指针或引用。

与 `std::vector`相反， deque 的元素不是相接存储的：典型实现用单独分配的固定大小数组的序列，外加额外的登记，这表示下标访问必须进行二次指针解引用，与之相比 vector 的下标访问只进行一次。

deque 的存储按需自动扩展及收缩。扩张 deque 比扩展 `std::vector`便宜，因为它不涉及到复制既存元素到新内存位置。另一方面， deque 典型地拥有较大的最小内存开销；只保有一个元素的 deque 必须分配其整个内部数组（例如 64 位 libstdc++ 上为对象大小 8 倍； 64 位 libc++ 上为对象大小 16 倍或 4096 字节的较大者）。

deque 上常见操作的复杂度（效率）如下：

- 随机访问——常数 O(1)
- 在结尾或起始插入或移除元素——常数 O(1)
- 插入或移除元素——线性 O(n)

std::deque 满足容器 (Container) 、具分配器容器 (Allocator Aware Container) 、顺序容器 (Sequence Container) 和可逆容器 (Reversible Container) 的要求。

## 方法

| 元素访问   |                                                 |
| ---------- | ----------------------------------------------- |
| at         | 访问指定的元素，同时进行越界检查 (公开成员函数) |
| [operator] | 访问指定的元素 (公开成员函数)                   |
| front      | 访问第一个元素 (公开成员函数)                   |
| back       | 访问最后一个元素 (公开成员函数)                 |

| 迭代器          |                                                 |
| --------------- | ----------------------------------------------- |
| begin  cbegin   | 返回指向容器第一个元素的迭代器 (公开成员函数)   |
| end  cend       | 返回指向容器尾端的迭代器 (公开成员函数)         |
| rbegin  crbegin | 返回指向容器最后元素的逆向迭代器 (公开成员函数) |
| rend  crend     | 返回指向前端的逆向迭代器 (公开成员函数)         |

| 容量                  |                                                   |
| --------------------- | ------------------------------------------------- |
| empty                 | 检查容器是否为空 (公开成员函数)                   |
| size                  | 返回容纳的元素数 (公开成员函数)                   |
| max_size              | 返回可容纳的最大元素数 (公开成员函数)             |
| shrink_to_fit (C++11) | 通过释放未使用的内存减少内存的使用 (公开成员函数) |

| 修改器                |                                           |
| --------------------- | ----------------------------------------- |
| clear                 | 清除内容 (公开成员函数)                   |
| insert                | 插入元素 (公开成员函数)                   |
| emplace (C++11)       | 原位构造元素 (公开成员函数)               |
| erase                 | 擦除元素 (公开成员函数)                   |
| push_back             | 将元素添加到容器末尾 (公开成员函数)       |
| emplace_back (C++11)  | 在容器末尾就地构造元素 (公开成员函数)     |
| pop_back              | 移除末元素 (公开成员函数)                 |
| push_front            | 插入元素到容器起始 (公开成员函数)         |
| emplace_front (C++11) | 在容器头部就地构造元素 (公开成员函数)     |
| pop_front             | 移除首元素 (公开成员函数)                 |
| resize                | 改变容器中可存储元素的个数 (公开成员函数) |
| swap                  | 交换内容 (公开成员函数)                   |



## 示例

```cpp
#include <iostream>
#include <deque>
 
int main()
{
    // 创建容纳整数的 deque
    std::deque<int> d = {7, 5, 16, 8};
 
    // 从 deque 的首尾添加整数
    d.push_front(13);
    d.push_back(25);
 
    // 迭代并打印 deque 的值
    for(int n : d) {
        std::cout << n << ' '; //13 7 5 16 8 25
    }
}
```

