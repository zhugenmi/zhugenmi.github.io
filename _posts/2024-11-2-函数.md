---
title: 函数
author: zhugenmi
date: 2024-11-2 21:20 +0800
categories: [C/C++, C语言编程]
tags: [c]
description: 
---

## 定义函数

C 语言中函数定义的一般形式如下：

```c
return_type function_name( parameter list )
{
	body of the function
}
```

在 C 语言中，函数由一个函数头和一个函数主体组成。

下面列出一个函数的所有组成部分：

(1) 返回类型：一个函数可以返回一个值。return_type 是函数返回的值的数据类型。有些函数执行所需的操作而不返回值，在这种情况下，return_type 是关键字 `void`。

(2) 函数名称：这是函数的实际名称。函数名和参数列表一起构成了函数签名。

(3) 参数：参数就像是占位符。当函数被调用时，您向参数传递一个值，这个值被称为实际参数。参数列表包括函数参数的类型、顺序、数量。参数是可选的，也就是说，函数可能不包含参数。

(4) 函数主体：函数主体包含一组定义函数执行任务的语句。

## 函数声明

函数声明会告诉编译器函数名称及如何调用函数。函数的实际主体可以单独定义。函数声明包括以下几个部分：

```c
return_type function_name( parameter list );
```

在一个源文件中定义函数且在另一个文件中调用函数时，函数声明是必需的。在这种情况下，应该在调用函数的文件顶部声明函数。

## 调用函数

当程序调用函数时，程序控制权会转移给被调用的函数。被调用的函数执行已定义的任务，当函数的返回语句被执行时，或到达函数的结束括号时，会把程序控制权交还给主程序。

## 函数参数

在函数定义中出现的参数可以看做是一个占位符，它没有数据，只能等到函数被调用时接收传递进来的数据，所以称为形式参数，简称**形参**。

函数被调用时给出的参数包含了实实在在的数据，会被函数内部的代码使用，所以称为实际参数，简称实参。

形参和实参的功能是数据传送，发生函数调用时，**实参的值会传送给形参**。形参和实参有以下几个特点：

1) 形参变量只有在函数被调用时才会分配内存，调用结束后，立刻释放内存，所以形参变量只有在函数内部有效，不能在函数外部使用。
2) 实参可以是常量、变量、表达式、函数等，无论实参是何种类型的数据，在进行函数调用时，它们都必须有确定的值，以便把这些值传送给形参，所以应该提前用赋值、输入等办法使实参获得确定值。
3) 实参和形参在数量上、类型上、顺序上必须严格一致，否则会发生“类型不匹配”的错误。

> 函数调用中发生的数据传送是单向的，只能把实参的值传送给形参，而不能把形参的值反向地传送给实参。 因此在函数调用过程中，形参的值发生改变，而实参中的值不会变化。

## 函数的返回值

函数的返回值是指函数被调用之后，执行函数体中的程序段所取得的值，可以通过`return`语句返回，其一般形式为：

```c
return 表达式;
或者：
return (表达式);
```

没有返回值的函数为空类型，用`void`进行说明，如：

```c
void func(){
	printf("Hello world!\n");
}
```

> 为了使程序有良好的可读性并减少出错， 凡不要求返回值的函数都应定义为 void 类型。

## 变量的作用域规则

任何一种编程中，作用域是程序中定义的变量所存在的区域，超过该区域变量就不能被访问。

C 语言中有三个地方可以声明变量：

- 在函数或块内部的局部变量。只能被该函数或该代码块内部的语句使用；局部变量在函数外部是不可知的。
- 在所有函数外部的全局变量。全局变量是定义在函数外部，通常是在程序的顶部。全局变量在整个程序生命周期内都是有效的，在任意的函数内部能访问全局变量。也就是说，全局变量在声明后整个程序中都是可用的。
- 在形式参数的函数参数定义中。函数的参数，形式参数，被当作该函数内的局部变量，它们会**优先覆盖全局变量**。

当局部变量被定义时，系统不会对其初始化，**必须自行对其初始化**。

定义全局变量时，系统会自动对其初始化，如下所示：

| 数据类型 | 初始化默认值 |
| -------- | ------------ |
| int      | 0            |
| char     | '\0'         |
| float    | 0            |
| double   | 0            |
| pointer  | NULL         |

> 正确地初始化变量是一个良好的编程习惯，否则有时候程序可能会产生意想不到的结果，因为未初始化的变量会导致一些在内存位置中已经可用的垃圾值。

从整体上看，C语言代码是由一个一个的函数构成的，除了定义和说明类的语句（例如变量定义、宏定义、类型定义等）可以放在函数外面，所有具有运算或逻辑处理能力的语句（例如加减乘除、`if else`、`for`、函数调用等）都要放在函数内部。

C语言不但提供了丰富的库函数，还允许用户定义自己的函数。每个函数都是一个可以重复使用的模块，通过模块间的相互调用，有条不紊地实现复杂的功能。可以说C程序的全部工作都是由各式各样的函数完成的，所以也把C语言称为函数式语言。

标准C语言（ANSI C）共定义了15 个头文件，称为“C标准库”，所有的编译器都必须支持，如何正确并熟练的使用这些标准库，可以反映出一个程序员的水平。

合格程序员：`<stdio.h>`、`<ctype.h>`、`<stdlib.h>`、`<string.h>`

熟练程序员：`<assert.h>`、`<limits.h`>、`<stddef.h>`、`<time.h>`

优秀程序员：`<float.h>`、`<math.h>`、`<error.h>`、`<locale.h>`、`<setjmp.h>`、`<signal.h>`、`<stdarg.h>`

更多详细信息请查阅C语言函数手册www.cplusplus.com